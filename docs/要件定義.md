## 集中モードタイマー - 完全要件定義書

### 1. プラットフォーム・技術スタック
- **対象OS**: macOS
- **実装技術**: SwiftUI + AppKit
- **アプリ形式**: メニューバーアプリ（NSStatusItem）

---

### 2. タイマー設定

**時間設定UI**
- スライダーで時間を選択
- 範囲：1分〜120分
- 刻み：5分単位
- スライダーのつまみ上または近くに現在選択中の数値を表示（例：「25分」）

---

### 3. メニューバー表示仕様

**非稼働時**
- 静的なタイマーアイコンのみ表示

**稼働中**
- 残り時間を「MM:SS」形式で表示（例：「15:30」）
- アイコンと時間を併記してもよい

**一時停止中**
- 一時停止マーク（⏸または類似記号）を表示
- 残り時間も併記（例：「⏸ 15:30」）

---

### 4. ポップアップUI（メニューバーアイコンクリック時）

**非稼働時の表示内容**
- タイマー設定用スライダー
- 開始ボタン

**稼働中の表示内容**
- 残り時間の大きな表示
- 一時停止ボタン
- キャンセルボタン

**一時停止中の表示内容**
- 残り時間の表示
- 再開ボタン
- キャンセルボタン

---

### 5. タイマー終了時の動作

**通知方法**
- ポップアップを自動表示
- ユーザーが閉じるまで表示し続ける
- **音は鳴らさない**

**ポップアップ内容**
- 終了メッセージ（例：「タイマーが終了しました」）
- 2つの選択肢ボタン：
  - **停止**：タイマーを完全に終了
  - **スヌーズ**：10分を追加して再スタート

**スヌーズの動作**
- 固定10分を現在時刻に追加
- 元の設定時間はリセットしない（追加のみ）

---

### 6. 機能制約

**同時稼働**
- 複数タイマーの同時稼働は不可
- 常に1つのタイマーのみ動作

**操作制約**
- 一時停止/再開：ポップアップ内のボタンでのみ操作
- キャンセル：ポップアップ内のボタンでのみ操作

---

### 7. デザインガイドライン

- **Apple Human Interface Guidelines (macOS)** に準拠
- システムフォント、システムカラーを使用
- ネイティブmacOSアプリの外観と操作感を維持

---

### 8. 技術要件

**必要な実装項目**
- NSStatusItemによるメニューバー統合
- Timerによるカウントダウン処理
- バックグラウンドでのタイマー継続動作
- アプリ終了時のタイマー状態保存（オプション）
- ポップアップウィンドウの管理

**権限**
- 通知権限は不要（音なし、システム通知なしのため）

---

### 9. 補足事項

**未定義の仕様（実装者判断）**
- タイマー終了時のメニューバーアイコンの視覚的変化（点滅、色変化など）
- アプリ終了/再起動時のタイマー復元の有無
- ポップアップウィンドウの位置とサイズ
- スライダーのビジュアルスタイル詳細

---

## 開発の注意点

**あなた（開発者）が判断すべきこと：**
この要件書には「最低限動作する仕様」しか含まれていない。以下は実装中に判断が必要：

- エラーハンドリング（システムスリープ時の動作など）
- アクセシビリティ対応
- パフォーマンス最適化
- エッジケース（120分タイマー中にMacを再起動したらどうなる？など）

**この要件で抜けている視点：**
実際のユーザーは「集中」したいのであって、タイマーを管理したいわけではない。本当に必要なのは「気が散る要素の排除」かもしれない。このアプリはその一部でしかない。

要件書は以上だ。開発者に渡せ。